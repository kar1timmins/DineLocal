## Internationalization (i18n)

### Overview

DineLocal serves a **global tourist audience** visiting destinations worldwide. While English is the primary language now, the design system should be prepared for internationalization.

### RTL (Right-to-Left) Language Support

**Prepare for Arabic, Hebrew, Urdu, Persian:**

```tsx
// Layout component with RTL support
<html dir={locale === 'ar' || locale === 'he' ? 'rtl' : 'ltr'} lang={locale}>

// ✅ CORRECT: Use logical properties (auto-flip in RTL)
<div className="ms-4 me-2 ps-6 pe-4">
  {/* ms = margin-inline-start, me = margin-inline-end */}
  {/* ps = padding-inline-start, pe = padding-inline-end */}
</div>

// ❌ INCORRECT: Directional properties (don't flip in RTL)
<div className="ml-4 mr-2 pl-6 pr-4">
  {/* ml/mr/pl/pr stay fixed, breaking RTL layout */}
</div>

// ✅ CORRECT: Use start/end for text alignment
<Text className="text-start">Aligns left in LTR, right in RTL</Text>
<Text className="text-end">Aligns right in LTR, left in RTL</Text>

// ❌ INCORRECT: Fixed directional alignment
<Text className="text-left">Always left, even in RTL</Text>
```

**Tailwind Logical Properties Reference:**

```tsx
// Margins
ms - 4 // margin-inline-start (left in LTR, right in RTL)
me - 4 // margin-inline-end (right in LTR, left in RTL)

// Padding
ps - 6 // padding-inline-start
pe - 6 // padding-inline-end

// Borders
border - s // border-inline-start
border - e // border-inline-end

// Rounding
rounded - s // rounded-inline-start
rounded - e // rounded-inline-end
```

### Date & Time Formatting

**Use `date-fns` with locale support:**

```tsx
import { format, formatDistance, formatRelative } from 'date-fns'
import { enUS, ja, es, fr, de, ar, zh } from 'date-fns/locale'

const locales = {
  en: enUS,
  ja: ja,
  es: es,
  fr: fr,
  de: de,
  ar: ar,
  zh: zh
}

// Format date based on user locale
<Paragraph>
  {format(bookingDate, 'PPP', { locale: locales[userLocale] })}
</Paragraph>
{/*
  en: January 15, 2025
  ja: 2025年1月15日
  es: 15 de enero de 2025
  fr: 15 janvier 2025
  de: 15. Januar 2025
  ar: ١٥ يناير ٢٠٢٥
*/}

// Relative time formatting
<Text className="text-sm text-muted-foreground">
  {formatDistance(bookingDate, new Date(), {
    addSuffix: true,
    locale: locales[userLocale]
  })}
</Text>
{/*
  en: in 3 days
  ja: 3 日後
  es: dentro de 3 días
  fr: dans 3 jours
*/}
```

### Currency Display

**Format currency based on user locale and detected currency:**

```tsx
const formatCurrency = (
  amount: number,
  currency: string,
  locale: string
): string => {
  return new Intl.NumberFormat(locale, {
    style: 'currency',
    currency: currency,
    minimumFractionDigits: 0,
    maximumFractionDigits: 2
  }).format(amount)
}

// Examples:
formatCurrency(45, 'USD', 'en-US')  // $45
formatCurrency(45, 'EUR', 'de-DE')  // 45 €
formatCurrency(45, 'EUR', 'fr-FR')  // 45 €
formatCurrency(45, 'JPY', 'ja-JP')  // ¥45
formatCurrency(45, 'GBP', 'en-GB')  // £45
formatCurrency(4500, 'INR', 'en-IN') // ₹4,500

// Usage in component
<Paragraph textColor="primary" fontWeight="bold" className="text-2xl">
  {formatCurrency(experience.price, experience.currency, userLocale)}
  <Text as="span" className="text-sm text-muted-foreground">
    {' '}per person
  </Text>
</Paragraph>
```

### Number Formatting

**Handle different decimal separators and thousands separators:**

```tsx
const formatNumber = (value: number, locale: string): string => {
  return new Intl.NumberFormat(locale).format(value)
}

formatNumber(1234.56, 'en-US')  // 1,234.56
formatNumber(1234.56, 'de-DE')  // 1.234,56
formatNumber(1234.56, 'fr-FR')  // 1 234,56
formatNumber(1234.56, 'en-IN')  // 1,234.56

// Display review count
<Flex alignItems="center" className="gap-2">
  <Star className="h-5 w-5 fill-amber-500 text-amber-500" />
  <Text fontWeight="semi-bold">4.8</Text>
  <Text className="text-sm text-muted-foreground">
    ({formatNumber(127, userLocale)} reviews)
  </Text>
</Flex>
```

### Translation Keys (Future Preparation)

**Structure content for future translation system:**

```tsx
// ✅ CORRECT: Separate strings for translation
const translations = {
  'booking.cta': 'Book Now',
  'booking.confirmation': 'Booking confirmed! Check your email for details.',
  'booking.guests': '{count, plural, one {# guest} other {# guests}}',
  'error.network': 'Check your internet connection and try again.',
  'empty.bookings.title': 'No bookings yet',
  'empty.bookings.description': 'Start exploring local dining experiences near you!',
  'empty.bookings.cta': 'Discover Experiences'
}

// Use translation function (prepare for future i18n library)
const t = (key: string, params?: Record<string, any>) => {
  // For now, return English strings
  // Later: Use i18next, react-intl, or next-intl
  return translations[key] || key
}

<Button>{t('booking.cta')}</Button>

// ❌ INCORRECT: Hardcoded strings scattered everywhere
<Button>Book Now</Button>
<Button>Reserve</Button>  // Inconsistent terminology
<Button>Book This Experience</Button>  // Different wording
```

### Text Overflow in Different Languages

**Some languages (German, Finnish, Thai) are 30-40% longer than English:**

```tsx
// ✅ CORRECT: Allow text to wrap or truncate gracefully
<Button className="min-w-[120px] max-w-[200px]">
  <span className="truncate">{t('booking.cta')}</span>
</Button>

// ✅ CORRECT: Multi-line labels for longer text
<Label className="leading-relaxed">
  {t('form.allergenInfo.label')}
</Label>

// ❌ INCORRECT: Fixed width that breaks in other languages
<Button className="w-32">
  {t('booking.cta')}  // May overflow in German: "Jetzt buchen"
</Button>
```

### Language-Specific Typography

**Font families may need to change per language:**

```tsx
const fontFamilies = {
  en: 'font-inter',           // Latin (English, Spanish, French, German)
  ja: 'font-noto-sans-jp',    // Japanese
  zh: 'font-noto-sans-sc',    // Chinese Simplified
  ko: 'font-noto-sans-kr',    // Korean
  ar: 'font-noto-sans-arabic', // Arabic
  th: 'font-noto-sans-thai'   // Thai
}

// Apply font based on locale
<body className={cn(fontFamilies[locale] || fontFamilies.en)}>
```

### Input Placeholders and Labels

**Never rely on placeholders alone (they disappear on focus):**

```tsx
// ✅ CORRECT: Visible label + placeholder
<div className="space-y-2">
  <Label htmlFor="email">{t('form.email.label')}</Label>
  <Input
    id="email"
    placeholder={t('form.email.placeholder')}
  />
  <Text className="text-sm text-muted-foreground">
    {t('form.email.helper')}
  </Text>
</div>

// ❌ INCORRECT: Placeholder-only (inaccessible + translation issues)
<Input placeholder="Enter your email" />
```

### Internationalization Guidelines

**DO:**

- ✅ Use logical properties (ms/me/ps/pe) for future RTL support
- ✅ Format dates with `date-fns` locale support
- ✅ Format currency and numbers with `Intl` APIs
- ✅ Prepare translation keys in structured format
- ✅ Allow text to wrap/truncate (some languages are longer)
- ✅ Use explicit labels (not placeholder-only)
- ✅ Test with longer text strings (German, Finnish)
- ✅ Consider font support for non-Latin scripts

**DON'T:**

- ❌ Use directional properties (ml/mr/pl/pr) for layout
- ❌ Hardcode date formats (MM/DD/YYYY vs DD/MM/YYYY)
- ❌ Hardcode currency symbols ($45 vs 45€)
- ❌ Scatter strings throughout components
- ❌ Use fixed widths that break with longer text
- ❌ Rely on placeholder-only form fields
- ❌ Assume English text length for layout
- ❌ Use Latin-only fonts globally

---
